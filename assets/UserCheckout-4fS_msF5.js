import{_ as u,m as h,r as _,o as n,c as l,a as p,b as t,d as g,F as a,j as m,t as e,h as f}from"./index-8b1OvpIZ.js";import{u as y}from"./toastMessage-gs1Rj6pH.js";const b={data(){return{order:{user:{}},orderId:""}},methods:{...h(y,["pushMessage"]),getOrder(){const d=`https://vue3-course-api.hexschool.io/v2//api/winnie05/order/${this.orderId}`;this.isLoading=!0,this.$http.get(d).then(s=>{this.order=s.data.order,this.isLoading=!1}).catch(s=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:s.response.data.message})})},payOrder(){const d=`https://vue3-course-api.hexschool.io/v2//api/winnie05/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(d).then(()=>{this.isLoading=!1,this.getOrder()}).catch(s=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"付款失敗",content:s.response.data.message})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},v={class:"my-5 row justify-content-center"},x={class:"table align-middle"},L=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),k={class:"text-end"},O=t("td",{colspan:"2",class:"text-end"},"總計",-1),w={class:"text-end"},I={class:"table"},M=t("th",{width:"100"},"Email",-1),V=t("th",null,"姓名",-1),B=t("th",null,"收件人電話",-1),C=t("th",null,"收件人地址",-1),N=t("th",null,"付款狀態",-1),S={key:0},$={key:1,class:"text-success"},j={key:0,class:"text-end"},E=t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),F=[E];function q(d,s,z,A,o,i){const c=_("VueLoading");return n(),l(a,null,[p(c,{active:d.isLoading,"z-index":1060},null,8,["active"]),t("div",v,[t("form",{class:"col-md-6",onSubmit:s[0]||(s[0]=g((...r)=>i.payOrder&&i.payOrder(...r),["prevent"]))},[t("table",x,[L,t("tbody",null,[(n(!0),l(a,null,m(o.order.products,r=>(n(),l("tr",{key:r.id},[t("td",null,e(r.product.title),1),t("td",null,e(r.qty)+"/"+e(r.product.unit),1),t("td",k,e(r.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[O,t("td",w,e(o.order.total),1)])])]),t("table",I,[t("tbody",null,[t("tr",null,[M,t("td",null,e(o.order.user.email),1)]),t("tr",null,[V,t("td",null,e(o.order.user.name),1)]),t("tr",null,[B,t("td",null,e(o.order.user.tel),1)]),t("tr",null,[C,t("td",null,e(o.order.user.address),1)]),t("tr",null,[N,t("td",null,[o.order.is_paid?(n(),l("span",$,"付款完成")):(n(),l("span",S,"尚未付款"))])])])]),o.order.is_paid===!1?(n(),l("div",j,F)):f("",!0)],32)])],64)}const U=u(b,[["render",q]]);export{U as default};
